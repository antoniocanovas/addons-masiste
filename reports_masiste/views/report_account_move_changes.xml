<?xml version='1.0' encoding='UTF-8'?>
<!-- Esto se usa, para modificar la factura por defecto-->
<odoo>
    <data>
         <record id="report_accountmove_document_changes" model="ir.ui.view">
            <field name="name">Facturas varios cambios</field>
            <field name="inherit_id" ref="account.report_invoice_document"/>
            <field name="arch" type="xml">

                <!-- Cambio en los decimales del precio de 4 a 2 -->
	            <xpath expr="//table[1]/tbody/t/tr/t/td[3]" position="replace">
                    <span class="text-nowrap" t-field="line.price_unit" t-options='{"widget": "float", "precision": 2}'/>
	            </xpath>

                <!-- Quitar nombre comercial a los clientes de momento lo hago desaparecer -->
	            <xpath expr="//t[@t-set='address'" position="replace">
                </xpath>

                <!-- Poner a misma altura del cliente el número de Factura, de momento lo hago desaparecer -->
	            <xpath expr="//h2" position="replace">
                </xpath>

                <!-- Poner a misma altura detalles de la factura, añado todo cliente número y detalle de factura -->
	            <xpath expr="//div[@id='informations'" position="replace">
                    <div>
	                    <div style="float:right">
                                <div style="text-align:_right;">
                                        <t t-set="address">
                                            <span t-esc="o.partner_id.name"/><br/>
                                            <span t-esc="o.partner_id.street"/><br/>
                                            <span t-esc="o.partner_id.zip"/> <span t-esc="o.partner_id.city"/><br/>
                                            <span t-esc="o.partner_id.state_id.name"/><br/>
                                            <div t-if="o.partner_id.vat" class="mt16">
                                                <t t-if="o.company_id.country_id.vat_label" t-esc="o.company_id.country_id.vat_label" id="inv_tax_id_label"/>
                                                <t t-else="">Tax ID</t>: <span t-field="o.partner_id.vat"/></div>
                                        </t>
                                </div>
                        </div>
                        <div style="float:left">
                                <div style="text-align:_left;">
                                    <h2>
                                        <span t-if="o.move_type == 'out_invoice' and o.state == 'posted'">Invoice</span>
                                        <span t-if="o.move_type == 'out_invoice' and o.state == 'draft'">Draft Invoice</span>
                                        <span t-if="o.move_type == 'out_invoice' and o.state == 'cancel'">Cancelled Invoice</span>
                                        <span t-if="o.move_type == 'out_refund'">Credit Note</span>
                                        <span t-if="o.move_type == 'in_refund'">Vendor Credit Note</span>
                                        <span t-if="o.move_type == 'in_invoice'">Vendor Bill</span>
                                        <span t-if="o.name != '/'" t-field="o.name"/>
                                    </h2>

                                    <div id="informations" class="row mt32 mb32">
                                        <div class="col-auto col-3 mw-100 mb-2" t-if="o.invoice_date" name="invoice_date">
                                            <strong>Invoice Date:</strong>
                                            <p class="m-0" t-field="o.invoice_date"/>
                                        </div>
                                        <div class="col-auto col-3 mw-100 mb-2" t-if="o.invoice_date_due and o.move_type == 'out_invoice' and o.state == 'posted'" name="due_date">
                                            <strong>Due Date:</strong>
                                            <p class="m-0" t-field="o.invoice_date_due"/>
                                        </div>
                                        <div class="col-auto col-3 mw-100 mb-2" t-if="o.invoice_origin" name="origin">
                                            <strong>Source:</strong>
                                            <p class="m-0" t-field="o.invoice_origin"/>
                                        </div>
                                        <div class="col-auto col-3 mw-100 mb-2" t-if="o.partner_id.ref" name="customer_code">
                                            <strong>Customer Code:</strong>
                                            <p class="m-0" t-field="o.partner_id.ref"/>
                                        </div>
                                        <div class="col-auto col-3 mw-100 mb-2" t-if="o.ref" name="reference">
                                            <strong>Reference:</strong>
                                            <p class="m-0" t-field="o.ref"/>
                                        </div>
                                        <div t-if="report_type == 'pdf'" class="text-muted">
						                    Page: <span class="page"/> / <span class="topage"/>
						                </div>
                                    </div>
                                </div>
                        </div>
                    </div>



                </xpath>



                <!-- Quitar unidades en la cantidad -->
	            <xpath expr="//table[1]/tbody/t/tr/t/td[2]" position="replace">
                    <td class="text-right">
                        <span t-field="line.quantity"/>
                    </td>
                </xpath>

                <!-- Quitar comentario a la referencia al pago -->
	            <xpath expr="//p[@name='payment_communication'" position="replace">
                </xpath>

                <!-- Poner a continuación del plazo de pago el modo de pago si existe-->
	            <xpath expr="//p[@name='payment_term'" position="replace">
                    <p t-if="o.invoice_payment_term_id" name="payment_term">
                        <span t-field="o.invoice_payment_term_id.note"/>
                        <t t-if="o.payment_mode_id">
                           Modo de pago: <span t-field="o.payment_mode_id"/>
                        </t>
                    </p>
                </xpath>


	    </field> 
         </record>

    </data>
</odoo>
